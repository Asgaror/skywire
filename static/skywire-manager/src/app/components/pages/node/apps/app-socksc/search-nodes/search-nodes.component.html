<div class="d-flex flex-column">
  <mat-progress-bar
    *ngIf="loading"
    style="position: absolute; top: 0;"
    mode="indeterminate">
  </mat-progress-bar>
  <table mat-table class="table-abs-white sm" [dataSource]="dataSource" *ngIf="!loading || dataSource.data.length > 0">
    <ng-container matColumnDef="nodekey">
      <th mat-header-cell *matHeaderCellDef>Node key</th>
      <td mat-cell *matCellDef="let item;">
        {{ item.node_key }}
      </td>
    </ng-container>
    <ng-container matColumnDef="appkey">
      <th mat-header-cell *matHeaderCellDef>App key</th>
      <td mat-cell *matCellDef="let item;">
        {{ item.app_key }}
      </td>
    </ng-container>
    <ng-container matColumnDef="versions">
      <th mat-header-cell *matHeaderCellDef>Versions</th>
      <td mat-cell *matCellDef="let item;">
        <span>Node: {{ item.node_version[0] }}</span>
        <br>
        <span>App: {{ item.version }}</span>
      </td>
    </ng-container>
    <ng-container matColumnDef="location">
      <th mat-header-cell *matHeaderCellDef>Location</th>
      <td mat-cell *matCellDef="let item;">
        {{ item.location }}
      </td>
    </ng-container>
    <ng-container matColumnDef="connect">
      <th mat-header-cell *matHeaderCellDef></th>
      <td mat-cell *matCellDef="let item;">
        <button color="primary" mat-flat-button (click)="connect({nodeKey: item.node_key, appKey: item.app_key})">Connect</button>
      </td>
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>
  <div class="d-flex justify-content-end align-items-center">
    <span>
      {{ pagerState }}
    </span>
    <button
      [disabled]="this.currentPage === 1"
      mat-icon-button
      matTooltip="Previous page"
      (click)="prevPage()">
      <mat-icon>navigate_before</mat-icon>
    </button>
    <button
      [disabled]="this.currentPage === this.pages"
      mat-icon-button
      matTooltip="Next page"
      (click)="nextPage()">
      <mat-icon>navigate_next</mat-icon>
    </button>
  </div>
</div>
